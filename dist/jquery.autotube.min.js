/*! jquery.autotube - v1.0.0 - 2016-11-02
* https://github.com/CarlRaymond/jquery.autotube
* Copyright (c) 2016 ; Licensed GPLv2 */
!function(a){"object"==typeof module&&"object"==typeof module.exports?a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";var b="https://www.googleapis.com/youtube/v3/videos",c="videoId",d=/^https?:\/\/(www\.)?youtube.com\/watch\?v=([^?&]+)/i,e=/^https?:\/\/(www\.)?youtube.com\/v\/([^\/\?]+)/i,f=/^https?:\/\/youtu.be\/([^\/]+)/i,g=/^https?:\/\/(www\.)?youtube.com\/embed\/([^\/]+)/i;a.expr[":"].youtube=function(b){var h=b.href;if(!h)return!1;var i=h.match(d);return null!=i?(a(b).data(c,i[2]),!0):(i=h.match(e),null!=i?(a(b).data(c,i[2]),!0):(i=h.match(f),null!=i?(a(b).data(c,i[1]),!0):(i=h.match(g),null!=i?(a(b).data(c,i[2]),!0):!1)))};var h=new TemplateEngine,i=new YoutubeApiLoader,j=function(a){return"https://www.youtube.com/watch?v="+a},k=function(b){var h=a(b).data(c);if(null==h){var i=b.href.match(d);null!=i?h=i[2]:(i=b.href.match(e),null!=i?h=i[2]:(i=b.href.match(f),null!=i?h=i[1]:(i=b.href.match(g),null!=i&&(h=i[2]))))}return null!=h&&a(b).data(c,h),h},l=0,m=function(a){var b="autotube-poster-"+a+"-"+l++;return b},n={part:"snippet,contentDetails",datakey:"autotube",canonicalUrl:j},o=function(d,e){var f=[];d.each(function(a){f.push(k(this))});var g={id:f.join(","),part:e.part,key:e.apikey},h=a.get(b,g);return h.done(function(b){d.each(function(d){var f=b.items[d],g=new Iso8601(f.contentDetails.duration),h={_canonicalUrl:e.canonicalUrl(a(this).data(c)),_settings:e,_playingTime:g.toDisplay()};a.extend(f,h),a(this).data(e.datakey,f)})}),h},p=function(b,c){var d=this,e=a.extend({},n,b);return o(d,e).done(function(){c&&d.each(function(){var b=a(this).data(e.datakey);c.call(this,b)})}),d},q=function(b,c){var d=this,e=a.extend({},n,b);if("string"==typeof e.onclick){var f=t[e.onclick];if(null==f)throw'Click handler "'+e.onclick+'" is not valid.';e.onclick=f}if("string"==typeof e.placer){var g=r[e.placer];if(null==g)throw'Poster placer "'+e.placer+'" is not valid.';e.placer=g}var i;i="function"==typeof e.template?a.Deferred().resolve(e.template):h.template(e.template);var j=o(d,e);a.when(i,j).done(function(b,f){d.each(function(){var d=a(this).data(e.datakey),f=m(k(this));d._posterId=f;var g=a(b(d));if(g.attr("id",f),e.placer&&e.placer.call(this,g,d),e.onclick){var h=e.onclick.bind(g[0]);a(document).on("click","#"+f,d,h)}c&&c.call(this,g,d)})})},r={appendToParent:function(b){a(this).parent().append(b)},appendToLink:function(b){a(this).append(b)},replaceLink:function(b){a(this).replaceWith(b)}},s=function(b){var c=this,d=i.load();return d.done(function(d){var e={videoId:b.data.id,height:360,width:640},f=a(c).find(b.data._settings.posterSelector)[0];new d.Player(f,e)}),!1},t={replacePoster:s};a.fn.videoMetadata=p,a.fn.videoPoster=q,a.autotube={videoId:k,canonicalUrl:j,uniquePosterId:m}});