/*! jquery.autotube - v1.0.0 - 2016-09-07
* https://github.com/CarlRaymond/jquery.autotube
* Copyright (c) 2016 ; Licensed GPLv2 */
!function(a){"use strict";"object"==typeof module&&"object"==typeof module.exports?a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b={part:"snippet,contentDetails",datakey:"autotube"},c="https://www.googleapis.com/youtube/v3/videos",d="videoId",e=/^https?:\/\/(www\.)?youtube.com\/watch\?v=([^?&]+)/i,f=/^https?:\/\/(www\.)?youtube.com\/v\/([^\/\?]+)/i,g=/^https?:\/\/youtu.be\/([^\/]+)/i,h=/^https?:\/\/(www\.)?youtube.com\/embed\/([^\/]+)/i;a.expr[":"].youtube=function(b){var c=b.href;if(!c)return!1;var i=c.match(e);return null!=i?(a(b).data(d,i[2]),!0):(i=c.match(f),null!=i?(a(b).data(d,i[2]),!0):(i=c.match(g),null!=i?(a(b).data(d,i[1]),!0):(i=c.match(h),null!=i?(a(b).data(d,i[2]),!0):!1)))};var i=new TemplateEngine,j=new YoutubeApiLoader,k=function(b){var c=a(b).data(d);if(null==c){var i=b.href.match(e);null!=i?c=i[2]:(i=b.href.match(f),null!=i?c=i[2]:(i=b.href.match(g),null!=i?c=i[1]:(i=b.href.match(h),null!=i&&(c=i[2]))))}return null!=c&&a(b).data(d,c),c},l=function(b,d){var e=[];b.each(function(a){e.push(k(this))});var f={id:e.join(","),part:d.part,key:d.apikey};return def=a.get(c,f),def.done(function(c){b.each(function(b){var e=c.items[b],f=new Iso8601(e.contentDetails.duration),g={_settings:d,_playingTime:f.toDisplay()};a.extend(e,g),a(this).data(d.datakey,e)})}),def},m=function(c,d){var e=this,f=a.extend({},b,c);return l(e,f).done(function(){d&&e.each(function(){var b=a(this).data(f.datakey);d.call(this,b)})}),e},n=function(c,d){var e=this,f=a.extend({},b,c),g=i.template(f.templatespec),h=l(e,f);a.when(g,h).done(function(b,c){e.each(function(){var c=a(this).data(f.datakey),e="autotube-poster-"+c.videoId;c._posterId=e;var g=a("<div id ='"+e+"'>").html(b(c));if(f.placer){if(!o[f.placer])throw'Placer "'+f.placer+'" is not valid.';o[f.placer].call(this,g,c)}if(f.onclick){var h=null;if("string"==typeof f.onclick){if(h=q[f.onclick],null==h)throw'Click handler "'+f.onclick+'" is not valid.'}else h=f.onclick;var i=h.bind(g[0]);g.on("click",c,i)}d&&d.call(this,g,c)})})},o={appendToParent:function(b){a(this).parent().append(b)},appendToLink:function(b){a(this).append(b)},replaceLink:function(b){a(this).replaceWith(b)}},p=function(b){var c=j.load();c.done(function(){var c=a(this).find(b.data.settings.posterSelector)[0];new YT.Player(c,{videoId:b.data.autotube.videoId})})},q={replacePoster:p};a.fn.autotube=function(a){if(methods[a])return methods[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!=typeof a&&a)throw"Method "+a+" does not exist on jQuery.autotube";return methods.init.apply(this,arguments)},a.fn.getMetadata=m,a.fn.poster=n,a.autotube={videoId:k}});