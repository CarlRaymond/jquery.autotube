/*! jquery.autotube - v1.0.0 - 2016-08-25
* https://github.com/CarlRaymond/jquery.autotube
* Copyright (c) 2016 ; Licensed GPLv2 */
!function(a){"object"==typeof module&&"object"==typeof module.exports?a(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b=/^https?:\/\/(www\.)?youtube.com\/watch\?v=([^?&]+)/i,c=/^https?:\/\/(www\.)?youtube.com\/v\/([^\/\?]+)/i,d=/^https?:\/\/youtu.be\/([^\/]+)/i,e=/^https?:\/\/(www\.)?youtube.com\/embed\/([^\/]+)/i;a.expr[":"].youtube=function(f){var g=f.href;if(!g)return!1;var h="yt-video-id",i=g.match(b);return null!=i?(a(f).data(h,i[2]),!0):(i=g.match(c),null!=i?(a(f).data(h,i[2]),!0):(i=g.match(d),null!=i?(a(f).data(h,i[1]),!0):(i=g.match(e),null!=i?(a(f).data(h,i[2]),!0):!1)))};var f=a.Deferred(),g=!1;window.onYouTubeIframeAPIReady=function(){f.resolve()};var h=function(){g||(g=!0,a.getScript("https://www.youtube.com/iframe_api"))},i=function(a,b,c){b.parent().append(c)},j=function(b){a("body").append(b)},k=function(a){var f=a.href.match(b);return null!=f?f[2]:(f=a.href.match(c),null!=f?f[2]:(f=a.href.match(d),null!=f?f[1]:(f=a.href.match(e),null!=f?f[2]:void 0)))},l=/^[A-Za-z][A-Za-z0-9.:_-]*$/,m=/^\/.*/,n={},o=function(a){return new Function("obj","var p=[], print=function() { p.push.apply(p, arguments); };with(obj) { p.push('"+a.replace(/[\r\t\n]/g," ").split("{{").join("	").replace(/((^|}})[^\t]*)'/g,"$1\r").replace(/\t=(.*?)}}/g,"',$1,'").split("	").join("');").split("}}").join("p.push('").split("\r").join("\\'")+"');} return p.join('');")},p=function(b){var c,d=a.Deferred();if(n[b])return d.resolve(n[b]),d;if(l.test(b)){var e=a("#"+b);if(0===e.length)throw'Template not found: "'+b+'". Use the "calloutTemplate" option with the id of a script block (of type "text/html") or a url to an external HTML file containing the template.';return c=o(e.html()),n[b]=c,d.resolve(c),d}if(m.test(b)){var f=a.ajax(b,{dataType:"html"}),g=f.then(function(a){return c=o(a),n[b]=c,c});return f.fail(function(a,c,d){window.console&&console.log('Error fetching template "'+b+'": '+d)}),g}return c=o(b),d.resolve(c)},q={calloutTemplate:"video-callout-template",playerTemplate:"video-player-template",calloutImageFilename:"default.jpg",calloutCallback:i,playerCallback:j,width:640,height:360},r=function(b){var c=a.extend({},q,b);0!==this.filter(function(){return a(this).data("autotube")}).length&&a.error("Autotube already applied to a selected element");var d;d=c.calloutRenderer?a.Deferred().resolve(c.calloutRenderer):p(c.calloutTemplate);var e=this;return d.done(function(b){e.each(function(d){var e=a(this),f=k(this),g=e.data("title")||e.text(),h={settings:c,videoId:f,posterId:"video-poster-"+d,playerId:"video-player-"+d,iframeId:"video-iframe-"+d,posterUrl:"https://img.youtube.com/vi/"+f+"/"+c.calloutImageFilename,title:g},i=b(h),j=a(i);e.attr("href","#");var l=a("a[href='#']",j).add(e);l.on("click.autotube",null,h,s),e.data("autotube",h),c.calloutCallback(h,e,j)})}),c},s=function(b){var c=b.data,d=c.settings;h();var e;e=c.playerRenderer?a.Deferred().resolve(c.settings.playerRenderer):p(c.settings.playerTemplate),a.when(e,f).then(function(b){var e=b(c),f=a(e),g=f.find("#"+c.iframeId)[0],h=new YT.Player(g,{height:d.height,width:d.width,videoId:c.videoId});c.settings.playerCallback(c,f,h)})},t=function(a){var b=/(P)([0-9]+Y)?([0-9]+M)?([0-9]+W)?([0-9]+D)?(T)([0-9]+H)?([0-9]+M)?([0-9]+S)?/,c={},d=a.match(b);if(null==d)return null;var e=!1;return d.forEach(function(a){if(void 0!==a){"T"==a&&(e=!0);var b=a.charAt(a.length-1),d=parseInt(a.slice(0,-1),10);switch(b){case"Y":c.years=d;break;case"M":e?c.minutes=d:c.months=d;break;case"W":c.weeks=d;break;case"D":c.days=d;break;case"H":c.hours=d;break;case"M":c.minutes=d;break;case"S":c.seconds=d}}}),c};a.fn.autotube=function(a){if(u[a])return u[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!=typeof a&&a)throw"Method "+a+" does not exist on jQuery.autotube";return u.init.apply(this,arguments)};var u={init:r};a.autotube={videoId:k,templateRenderer:p,parseDuration:t}});