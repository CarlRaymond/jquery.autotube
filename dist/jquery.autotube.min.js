/*! jquery.autotube - v1.0.0 - 2015-10-16
* https://github.com/CarlRaymond/jquery.autotube
* Copyright (c) 2015 ; Licensed GPLv2 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b=/^https?:\/\/(www\.)?youtube.com\/watch\?v=([^?&]+)/i,c=/^https?:\/\/(www\.)?youtube.com\/v\/([^\/\?]+)/i,d=/^https?:\/\/youtu.be\/([^\/]+)/i,e=/^https?:\/\/(www\.)?youtube.com\/embed\/([^\/]+)/i;a.expr[":"].youtube=function(a){var f=a.href;return f?null!=f.match(b)||null!=f.match(c)||null!=f.match(d)||null!=f.match(e):!1};var f=a.Deferred(),g=!1;window.onYouTubeIframeAPIReady=function(){f.resolve()};var h=function(){g||(g=!0,a.getScript("https://www.youtube.com/iframe_api"))},i=function(a,b,c){b.parent().append(c)},j=function(b){a("body").append(b)},k=function(a){var f=a.href.match(b);return null!=f?f[2]:(f=a.href.match(c),null!=f?f[2]:(f=a.href.match(d),null!=f?f[1]:(f=a.href.match(e),null!=f?f[2]:void 0)))},l=/^[A-Za-z][A-Za-z0-9.:_-]*$/,m=/^\/.*/,n={},o=function(a){return new Function("obj","var p=[], print=function() { p.push.apply(p, arguments); };with(obj) { p.push('"+a.replace(/[\r\t\n]/g," ").split("{{").join("	").replace(/((^|}})[^\t]*)'/g,"$1\r").replace(/\t=(.*?)}}/g,"',$1,'").split("	").join("');").split("}}").join("p.push('").split("\r").join("\\'")+"');} return p.join('');")},p=function(b){var c,d=a.Deferred();if(n[b])return d.resolve(n[b]),d;if(l.test(b)){var e=a("#"+b);if(0===e.length)throw'Template not found: "'+b+'"';return c=o(e.html()),n[b]=c,d.resolve(c),d}if(m.test(b)){var f=a.ajax(b,{dataType:"html"}),g=f.then(function(a){return c=o(a),n[b]=c,c});return g}return c=o(b),d.resolve(c)},q={calloutTemplate:"video-callout-template",playerTemplate:"video-player-template",calloutImageFilename:"default.jpg",calloutCallback:i,playerCallback:j},r=function(b){var c=a.extend({},q,b);0!==this.filter(function(){return a(this).data("autotube")}).length&&a.error("Autotube already applied to a selected element");var d;d=c.calloutRenderer?a.Deferred().resolve(c.calloutRenderer):p(c.calloutTemplate);var e=this;return d.done(function(b){e.each(function(d){var e=a(this),f=k(this),g=e.data("title")||e.text(),h=a.extend({videoId:f,posterId:"video-poster-"+d,playerId:"video-player-"+d,iframeId:"video-iframe-"+d,posterUrl:"https://img.youtube.com/vi/"+f+"/"+c.calloutImageFilename,title:g},c),i=b(h),j=a(i);e.attr("href","#");var l=a("a[href='#']",j).add(e);l.on("click.autotube",null,h,s),e.data("autotube",{settings:c,info:h}),c.calloutCallback(h,e,j)})}),c},s=function(b){var c=b.data;h();var d;d=c.playerRenderer?a.Deferred().resolve(c.playerRenderer):p(c.playerTemplate),a.when(d,f).then(function(b){var d=b(c),e=a(d),f=e.find("#"+c.playerId)[0],g=new YT.Player(f,{height:"360",width:"640",videoId:c.videoId});c.playerCallback(c,e,g)})};a.fn.autotube=function(a){if(t[a])return t[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!=typeof a&&a)throw"Method "+a+" does not exist on jQuery.autotube";return t.init.apply(this,arguments)};var t={init:r};a.autotube={videoId:k,templateRenderer:p}});