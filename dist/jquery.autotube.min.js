/*! jquery.autotube - v1.0.0 - 2015-10-14
* https://github.com/CarlRaymond/jquery.autotube
* Copyright (c) 2015 ; Licensed GPLv2 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b=/^https?:\/\/(www\.)?youtube.com\/watch\?v=([^?&]+)/i,c=/^https?:\/\/(www\.)?youtube.com\/v\/([^\/\?]+)/i,d=/^https?:\/\/youtu.be\/([^\/]+)/i,e=/^https?:\/\/(www\.)?youtube.com\/embed\/([^\/]+)/i;a.expr[":"].youtube=function(a){var f=a.href;return f?null!=f.match(b)||null!=f.match(c)||null!=f.match(d)||null!=f.match(e):!1};var f=a.Deferred();window.onYouTubeIframeAPIReady=function(){f.resolve()};var g=function(a,b,c){b.parent().append(c)},h=function(b){a("body").append(b)},i=function(a){var f=a.href.match(b);return null!=f?f[2]:(f=a.href.match(c),null!=f?f[2]:(f=a.href.match(d),null!=f?f[1]:(f=a.href.match(e),null!=f?f[2]:void 0)))},j=/^[A-Za-z][A-Za-z0-9.:_-]*$/,k=/^\/.*/,l={},m=function(a){return new Function("obj","var p=[], print=function() { p.push.apply(p, arguments); };with(obj) { p.push('"+a.replace(/[\r\t\n]/g," ").split("{{").join("	").replace(/((^|}})[^\t]*)'/g,"$1\r").replace(/\t=(.*?)}}/g,"',$1,'").split("	").join("');").split("}}").join("p.push('").split("\r").join("\\'")+"');} return p.join('');")},n=function(b){var c,d=a.Deferred();if(l[b])return d.resolve(l[b]),d;if(j.test(b)){var e=a("#"+b);if(0===e.length)throw'Template not found: "'+b+'"';return c=m(e.html()),l[b]=c,d.resolve(c),d}if(k.test(b)){var f=a.ajax(b),g=f.then(function(a){return c=m(a),l[b]=c,c});return g}return c=m(b),d.resolve(c)},o={calloutTemplate:"video-callout-template",playerTemplate:"video-player-template",calloutImageFilename:"default.jpg",calloutCallback:g,playerCallback:h},p=function(b){var c=a.extend({},o,b);0!==this.filter(function(){return a(this).data("autotube")}).length&&a.error("Autotube already applied to a selected element");var d;d=c.calloutRender?a.Deferred().resolve(c.calloutRenderer):n(c.calloutTemplate);var e=this;return d.done(function(b){e.each(function(d){var e=a(this),f=i(this),g=e.data("title")||e.text(),h={videoId:f,posterId:"video-poster-"+d,playerId:"video-player-"+d,iframeId:"video-iframe-"+d,posterUrl:"https://img.youtube.com/vi/"+f+"/"+c.calloutImageFilename,title:g},j=b(h),k=a(j);c.calloutCallback(h,e,k),e.attr("href","#");var l=a("a[href='#']",k).add(e);l.on("click.autotube",null,h,q),e.data("autotube",{settings:c,info:h})})}),c},q=function(b){alert("Showing player for video "+b.data.videoId);a.Deferred()};a.fn.autotube=function(a){if(r[a])return r[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"!=typeof a&&a)throw"Method "+a+" does not exist on jQuery.autotube";return r.init.apply(this,arguments)};var r={init:p};a.autotube={videoId:i,templateRenderer:n}});